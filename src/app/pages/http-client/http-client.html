<div class="max-w-full mx-auto p-6">
  <h1 class="text-4xl font-extrabold text-center text-gray-800 dark:text-gray-100 mb-8">
    HttpClient y Estado Reactivo
  </h1>

  <!-- GRID RESPONSIVE -->
  <div class="mt-8 grid grid-cols-1 gap-6 lg:grid-cols-2">
    <!-- ================= CARGA HTTP ================= -->
    <div
      class="bg-white dark:bg-gray-900 rounded-2xl shadow-lg p-6 flex flex-col gap-4 border border-gray-200 dark:border-gray-700 lg:col-span-2"
    >
      <h2 class="text-xl font-semibold text-green-600 dark:text-green-400">PeticiÃ³n HTTP</h2>
      <p class="text-gray-600 dark:text-gray-400">
        Carga de datos desde la API y actualizaciÃ³n del estado global
      </p>

      <button
        (click)="cargarCorredores()"
        [disabled]="cargando()"
        class="cursor-pointer py-3 px-6 rounded-lg bg-green-600 text-white font-semibold shadow hover:bg-green-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
      >
        @if (cargando()) {
        <span
          class="inline-block w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"
        ></span>
        Cargando... } @else { Cargar corredores }
      </button>
    </div>

    <!-- ================= SIGNAL ACTIVA ================= -->
    @if (seleccionado()) {
    <div
      class="bg-white dark:bg-gray-900 rounded-2xl shadow-lg p-6 flex flex-col gap-4 lg:col-span-2 border border-gray-200 dark:border-gray-700"
    >
      <h2 class="text-xl font-semibold text-red-600 dark:text-red-400">Signal activa</h2>

      <p
        class="bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 p-4 rounded-lg border border-red-100 dark:border-red-800"
      >
        Corredor seleccionado:
        <strong class="font-bold">{{ seleccionado() }}</strong>
      </p>
    </div>
    }

    <!-- ================= LISTADO ================= -->
    @if (corredores.length > 0) {
    <div
      class="bg-white dark:bg-gray-900 rounded-2xl shadow-lg p-6 flex flex-col gap-4 lg:col-span-2 border border-gray-200 dark:border-gray-700"
    >
      <h2 class="text-xl font-semibold text-purple-600 dark:text-purple-400">
        Listado de corredores
      </h2>

      <ul class="flex flex-col gap-3">
        @for (c of corredores; track c.dorsal) {
        <li
          class="flex items-center justify-between bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border border-purple-100 dark:border-purple-800 hover:shadow-md transition"
        >
          <div class="flex flex-col">
            <span
              class="text-xs font-bold text-purple-600 dark:text-purple-400 uppercase tracking-wide"
            >
              Dorsal #{{ c.dorsal }}
            </span>
            <span class="text-lg font-bold text-purple-700 dark:text-purple-300">
              {{ c.corredor }}
            </span>
            <span class="text-sm text-gray-600 dark:text-gray-400">{{ c.categoria }}</span>
          </div>

          <button
            (click)="seleccionar(c.corredor)"
            class="cursor-pointer text-sm px-4 py-2 rounded-lg bg-purple-600 text-white font-semibold shadow hover:bg-purple-700 transition"
          >
            Seleccionar
          </button>
        </li>
        }
      </ul>
    </div>
    } @else {
    <div
      class="bg-white dark:bg-gray-900 rounded-2xl shadow-lg p-12 flex flex-col items-center justify-center lg:col-span-2 border-2 border-dashed border-gray-200 dark:border-gray-700"
    >
      <div class="text-6xl mb-4">ðŸ‘Ÿ</div>
      <p class="text-gray-500 dark:text-gray-400 font-medium text-center">
        No hay datos que mostrar.<br />Haz clic en "Cargar corredores".
      </p>
    </div>
    }
  </div>
</div>
